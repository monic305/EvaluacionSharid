<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>GlowBeauty - Usuario</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" th:href="@{/css/stylesUsua.css}">
</head>

<body data-theme="light">
	<!-- Custom Alert -->
	<div id="customAlert" class="custom-alert">
		<i class="fas fa-check-circle alert-icon"></i>
		<p id="alertMessage"></p>
	</div>

	<!-- Navigation -->
	<nav>
		<div class="nav-container">
			<div class="logo" onclick="showSection('home')">
				<i class="fas fa-scissors"></i> GlowBeauty
			</div>
			<ul class="nav-links">
				<li><a onclick="showSection('home')">Inicio</a></li>
				<li><a onclick="showSection('services')">Servicios</a></li>
				<li><a onclick="showSection('booking')">Reservar</a></li>
				<li><a onclick="showSection('profile')">Mi Perfil</a></li>
				<li>
					<button class="theme-toggle" onclick="toggleTheme()">
						<i class="fas fa-moon" id="themeIcon"></i>
					</button>
				</li>
				<li class="user-menu">
					<div class="user-avatar" id="userAvatar" onclick="toggleUserDropdown()">
						<span
							th:text="${nombreUsuario != null ? nombreUsuario.substring(0,1).toUpperCase() : 'U'}">U</span>
					</div>
					<div class="user-dropdown" id="userDropdown">
						<a th:href="@{/logout}">Cerrar Sesi贸n</a>
					</div>
				</li>
			</ul>
		</div>
	</nav>


	<input type="hidden" id="usuarioId" th:value="${usuarioId}">
	<input type="hidden" id="nombreUsuario" th:value="${nombreUsuario}">

	<!-- Main Content -->
	<main>

		<!--alertas-->
		<div th:if="${success}" class="alert alert-success"
			style="margin: 1rem auto; max-width: 1200px; padding: 1rem; background: #10b981; color: white; border-radius: 8px; text-align: center;">
			<span th:text="${success}"></span>
		</div>
		<div th:if="${error}" class="alert alert-error"
			style="margin: 1rem auto; max-width: 1200px; padding: 1rem; background: #ef4444; color: white; border-radius: 8px; text-align: center;">
			<span th:text="${error}"></span>
		</div>

		<!-- Home Section -->
		<section id="home" class="section active">
			<div class="hero">
				<div class="hero-content">
					<h1>Hola, <span th:text="${nombreUsuario}">Usuario</span></h1>
					<p>Tu belleza es nuestra prioridad. Agenda tus servicios favoritos con los mejores profesionales</p>
					<div class="hero-buttons">
						<button class="btn btn-primary" onclick="showSection('services')">Explorar Servicios</button>
						<button class="btn btn-secondary" onclick="showSection('booking')">Reservar Ahora</button>
					</div>
				</div>
			</div>
			<!-- Carousel -->
			<div class="carousel">
				<div class="carousel-inner">
					<div class="carousel-item active">
						<div class="carousel-content">
							<h2><i class="fas fa-bolt"></i> Agenda en segundos</h2>
							<p>Encuentra y reserva servicios de belleza con profesionales calificados de manera r谩pida y
								sencilla</p>
						</div>
					</div>
					<div class="carousel-item">
						<div class="carousel-content">
							<h2><i class="fas fa-user-check"></i> Profesionales verificados</h2>
							<p>Todos nuestros estilistas est谩n verificados y cuentan con excelentes calificaciones</p>
						</div>
					</div>
					<div class="carousel-item">
						<div class="carousel-content">
							<h2><i class="fas fa-clock"></i> Disponibilidad 24/7</h2>
							<p>Reserva en cualquier momento y recibe confirmaci贸n instant谩nea de tu cita</p>
						</div>
					</div>
				</div>
				<button class="carousel-nav carousel-prev" onclick="prevSlide()"><i
						class="fas fa-chevron-left"></i></button>
				<button class="carousel-nav carousel-next" onclick="nextSlide()"><i
						class="fas fa-chevron-right"></i></button>
				<div class="carousel-controls">
					<span class="carousel-dot active" onclick="goToSlide(0)"></span>
					<span class="carousel-dot" onclick="goToSlide(1)"></span>
					<span class="carousel-dot" onclick="goToSlide(2)"></span>
				</div>
			</div>

			<!-- Stats -->
			<div class="stats-container">
				<div class="stat-card">
					<div class="stat-number">50+</div>
					<div class="stat-label">Profesionales</div>
				</div>
				<div class="stat-card">
					<div class="stat-number">5K+</div>
					<div class="stat-label">Citas Realizadas</div>
				</div>
				<div class="stat-card">
					<div class="stat-number">98%</div>
					<div class="stat-label">Clientes Satisfechos</div>
				</div>
			</div>

			<!-- Services Cards -->
			<h2 class="section-title">Servicios Destacados</h2>
			<div class="services-grid" id="featuredServices">
				<div th:each="servicio : ${servicios}" class="service-card">
					<div class="service-icon"><i class="fas fa-cut"></i></div>
					<h3 th:text="${servicio.nombre}">Servicio</h3>
					<p th:text="${servicio.descripcion}">Descripci贸n</p>
					<div class="service-price">$<span th:text="${servicio.precio}">0</span></div>
					<div class="service-duration"><i class="fas fa-clock"></i> <span th:text="${servicio.duracion}">0
							min</span></div>
					<button class="btn btn-primary" onclick="showSection('booking')">Reservar</button>
				</div>
			</div>
		</section>

		<!-- Services Section -->
		<section id="services" class="section">
			<h1 class="section-title">Todos los Servicios</h1>
			<div class="services-grid">
				<div th:each="servicio : ${servicios}" class="service-card">
					<div class="service-icon"><i class="fas fa-cut"></i></div>
					<h3 th:text="${servicio.nombre}">Servicio</h3>
					<p th:text="${servicio.descripcion}">Descripci贸n</p>
					<div class="service-price">$<span th:text="${servicio.precio}">0</span></div>
					<div class="service-duration"><i class="fas fa-clock"></i> <span th:text="${servicio.duracion}">0
							min</span></div>
					<div class="service-professional">
						<strong>Profesional:</strong> <span
							th:text="${servicio.profesional.usuario.nombre}">Profesional</span>
					</div>
					<button class="btn btn-primary" onclick="showSection('booking')">Reservar</button>
				</div>
			</div>
		</section>

		<!-- Booking Section -->
		<section id="booking" class="section">
			<h1 class="section-title">Reservar Cita</h1>
			<div class="panel-card">
				<h3><i class="fas fa-calendar-check"></i> Agendar Nueva Cita</h3>
				<form th:action="@{/usuario/agendar-cita}" method="post">
					<div class="form-group">
						<label>Selecciona un Servicio</label>
						<select name="servicioId" id="servicioSelect" required
							onchange="mostrarDetallesServicio(this.value)">
							<option value="">-- Elige un servicio --</option>
							<option th:each="servicio : ${servicios}" th:value="${servicio.id}"
								th:text="${servicio.nombre}" th:attr="data-profesional-id=${servicio.profesional.id},
													 data-profesional-nombre=${servicio.profesional.usuario.nombre},
													 data-descripcion=${servicio.descripcion},
													 data-duracion=${servicio.duracion},
													 data-precio=${servicio.precio}">
								Servicio
							</option>
						</select>
					</div>

					<div id="detallesServicio"
						style="display:none; margin-top: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: 8px;">
						<h4>Detalles del Servicio</h4>
						<p><strong>Profesional:</strong> <span id="profesionalNombre"></span></p>
						<p><strong>Descripci贸n:</strong> <span id="servicioDescripcion"></span></p>
						<p><strong>Duraci贸n:</strong> <span id="servicioDuracion"></span></p>
						<p><strong>Precio:</strong> $<span id="servicioPrecio"></span></p>
						<input type="hidden" name="profesionalId" id="profesionalId">
					</div>

					<div class="form-group" style="margin-top: 1.5rem;">
						<label>Fecha</label>
						<input type="date" name="fecha" id="bookingDate" required>
					</div>

					<div class="form-group">
						<label>Hora</label>
						<select name="hora" id="horaSelect" required>
							<option value="">-- Selecciona una hora --</option>
							<option value="09:00">09:00 AM</option>
							<option value="09:30">09:30 AM</option>
							<option value="10:00">10:00 AM</option>
							<option value="10:30">10:30 AM</option>
							<option value="11:00">11:00 AM</option>
							<option value="11:30">11:30 AM</option>
							<option value="12:00">12:00 PM</option>
							<option value="12:30">12:30 PM</option>
							<option value="14:00">02:00 PM</option>
							<option value="14:30">02:30 PM</option>
							<option value="15:00">03:00 PM</option>
							<option value="15:30">03:30 PM</option>
							<option value="16:00">04:00 PM</option>
							<option value="16:30">04:30 PM</option>
							<option value="17:00">05:00 PM</option>
							<option value="17:30">05:30 PM</option>
							<option value="18:00">06:00 PM</option>
						</select>
					</div>

					<button type="submit" class="btn btn-primary">Agendar Cita</button>
				</form>
			</div>
		</section>


		<!-- Profile Section -->
		<section id="profile" class="section">
			<h1 class="section-title">Mi Perfil</h1>
			<div class="profile-container">
				<div class="profile-info">
					<div class="profile-header">
						<div class="profile-avatar" id="profileAvatar"><i class="fas fa-user"></i></div>
						<h2 id="profileName" th:text="${nombreUsuario}">Usuario GlowBeauty</h2>
					</div>

					<form th:action="@{/usuario/actualizar-perfil}" method="post">
						<input type="hidden" name="id" th:value="${usuarioId}">

						<div class="form-group">
							<label>Nombre completo</label>
							<input type="text" name="nombre" placeholder="Tu nombre" th:value="${nombreUsuario}"
								required>
						</div>
						<div class="form-group">
							<label>Email</label>
							<input type="email" name="email" placeholder="tu@email.com" th:value="${emailUsuario}"
								required>
						</div>
						<div class="form-group">
							<label>Tel茅fono</label>
							<input type="tel" name="telefono" placeholder="+57 300 123 4567"
								th:value="${telefonoUsuario}" required>
						</div>
						<button type="submit" class="btn btn-primary">Actualizar Perfil</button>
					</form>

					<a th:href="@{/logout}" class="btn logout-btn"
						style="display: inline-block; text-align: center; text-decoration: none; width: 100%;">Cerrar
						Sesi贸n</a>

					<form th:action="@{/usuario/eliminar-cuenta}" method="post"
						onsubmit="return confirm('驴Est谩s seguro de eliminar tu cuenta?');">
						<input type="hidden" name="id" th:value="${usuarioId}">
						<button type="submit" class="btn delete-account-btn">Eliminar Cuenta</button>
					</form>
				</div>

				<div class="appointments-list">
					<h3><i class="fas fa-calendar-alt"></i> Mis Citas Programadas</h3>
					<div id="userAppointments" style="margin-top: 1rem;">
						<div th:if="${#lists.isEmpty(citas)}"
							style="text-align: center; color: var(--text-color); opacity: 0.7;">
							No tienes citas programadas
						</div>
						<div th:each="cita : ${citas}" class="appointment-item">
							<h4 th:text="${cita.profesional.usuario.nombre}">Profesional</h4>
							<p><strong>Servicio:</strong> <span th:text="${cita.servicio.nombre}">Servicio</span></p>
							<p><strong>Fecha:</strong> <span
									th:text="${#temporals.format(cita.fechaHora, 'dd/MM/yyyy')}">Fecha</span></p>
							<p><strong>Hora:</strong> <span
									th:text="${#temporals.format(cita.fechaHora, 'HH:mm')}">Hora</span></p>
							<p><strong>Estado:</strong>
								<span th:if="${cita.estado == 'pendiente'}" style="color: #f59e0b;">Pendiente</span>
								<span th:if="${cita.estado == 'confirmada'}" style="color: #10b981;">Confirmada</span>
								<span th:if="${cita.estado == 'completada'}" style="color: #6b7280;">Completada</span>
								<span th:if="${cita.estado == 'cancelada'}" style="color: #ef4444;">Cancelada</span>
							</p>
							<div class="appointment-actions"
								th:if="${cita.estado != 'cancelada' && cita.estado != 'completada'}">
								<form th:action="@{/usuario/cancelar-cita}" method="post" style="display: inline;"
									onsubmit="return confirm('驴Est谩s seguro de cancelar esta cita?');">
									<input type="hidden" name="citaId" th:value="${cita.id}">
									<button type="submit" class="btn btn-danger">Cancelar Cita</button>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
	<!-- Footer -->
	<footer>
		<div class="footer-content">
			<div class="logo" style="font-size: 2rem; margin-bottom: 1rem;"><i class="fas fa-scissors"></i> GlowBeauty
				Beauty</div>
			<p>Tu belleza es nuestra prioridad</p>

			<div class="footer-grid">
				<div class="footer-section">
					<h3>Navegaci贸n</h3>
					<ul>
						<li><a onclick="showSection('home')">Inicio</a></li>
						<li><a onclick="showSection('services')">Servicios</a></li>
						<li><a onclick="showSection('booking')">Reservar</a></li>
						<li><a onclick="showSection('profile')">Mi Perfil</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Servicios Populares</h3>
					<ul>
						<li><a onclick="showSection('services')">Corte de Cabello</a></li>
						<li><a onclick="showSection('services')">Coloraci贸n</a></li>
						<li><a onclick="showSection('services')">Tratamientos</a></li>
						<li><a onclick="showSection('services')">Manicure & Pedicure</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Legal</h3>
					<ul>
						<li><a href="#">T茅rminos y Condiciones</a></li>
						<li><a href="#">Pol铆tica de Privacidad</a></li>
						<li><a href="#">Pol铆tica de Cancelaci贸n</a></li>
						<li><a href="#">Preguntas Frecuentes</a></li>
					</ul>
				</div>
				<div class="footer-section">
					<h3>Contacto</h3>
					<div class="contact-info">
						<p><i class="fas fa-map-marker-alt"></i> Fusagasug谩, Cundinamarca</p>
						<p><i class="fas fa-phone"></i> +57 300 123 4567</p>
						<p><i class="fas fa-envelope"></i> info@GlowBeauty.com</p>
						<p><i class="fas fa-clock"></i> Lun-Sab: 9AM-7PM</p>
					</div>
				</div>
			</div>

			<div class="social-links">
				<a href="#"><i class="fab fa-facebook-f"></i></a>
				<a href="#"><i class="fab fa-instagram"></i></a>
				<a href="#"><i class="fab fa-whatsapp"></i></a>
				<a href="#"><i class="fab fa-tiktok"></i></a>
				<a href="#"><i class="fab fa-youtube"></i></a>
			</div>

			<p
				style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.3); font-size: 0.9rem;">
				&copy; 2025 GlowBeauty. Todos los derechos reservados. | Hecho con  para ti
			</p>
		</div>
	</footer>
	<script th:src="@{/js/scripsUsuario.js}"></script>
</body>

</html>